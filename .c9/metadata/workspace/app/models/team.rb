{"filter":false,"title":"team.rb","tooltip":"/app/models/team.rb","undoManager":{"mark":1,"position":1,"stack":[[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"insert","lines":["<<<<<<< HEAD",""]},{"start":{"row":4,"column":0},"end":{"row":36,"column":0},"action":"insert","lines":["=======","  scope :registered, -> { where(registered: true) }","  scope :not_registered, -> { where.not(registered: true) }","  scope :valuable, -> { registered.where(\"member_count >= 4\") }","","  def team_players","    players.where(team_uid: team_uid).grade_ordered","  end","","  def league_players","    players.where(league_uid: league_uid).grade_ordered","  end","","  def team_form","    return @team_form if @team_form","    team_players.where(position: nil).find_each(&:possible_position)","    x = team_players.to_a","    xform = {}","    Player::POS.sort { |x, y| x[1] <=> y[1] }.each do |pos, val|","      next if [\"CAM\", \"LM\", \"RM\"].include?(pos)","      c = [\"CB\", \"CM\"].include?(pos) ? 2 : 1","      xp = x.select { |p| val & p.position != 0}.sort { |a, b| a.position <=> b.position }.first(c)","      if xp","        xform[pos] = [*xp][0...c]","        [*xp][0...c].each { |xxp| x.delete xxp }","      end","    end","    @team_form = {in_form: xform, other: x}","    @team_form","  end","",">>>>>>> 0e45809c2b8f645826e4de91adff641269ed9bf4",""]},{"start":{"row":37,"column":25},"end":{"row":37,"column":31},"action":"remove","lines":[" = nil"]},{"start":{"row":37,"column":25},"end":{"row":38,"column":36},"action":"insert","lines":[")","      # do_create_team(prefix, xteam"]},{"start":{"row":47,"column":9},"end":{"row":57,"column":18},"action":"insert","lines":["","    end","","    private","    def do_create_team(xlogin, xteam)","      x = X11.new(uid: xlogin, tuid: xteam)","      x.register","      x.login","      x.create_team","      x.buy_player","      x.get_lineup"]}]}],[{"group":"doc","deltas":[{"start":{"row":2,"column":0},"end":{"row":3,"column":0},"action":"remove","lines":["<<<<<<< HEAD",""]},{"start":{"row":3,"column":0},"end":{"row":35,"column":0},"action":"remove","lines":["=======","  scope :registered, -> { where(registered: true) }","  scope :not_registered, -> { where.not(registered: true) }","  scope :valuable, -> { registered.where(\"member_count >= 4\") }","","  def team_players","    players.where(team_uid: team_uid).grade_ordered","  end","","  def league_players","    players.where(league_uid: league_uid).grade_ordered","  end","","  def team_form","    return @team_form if @team_form","    team_players.where(position: nil).find_each(&:possible_position)","    x = team_players.to_a","    xform = {}","    Player::POS.sort { |x, y| x[1] <=> y[1] }.each do |pos, val|","      next if [\"CAM\", \"LM\", \"RM\"].include?(pos)","      c = [\"CB\", \"CM\"].include?(pos) ? 2 : 1","      xp = x.select { |p| val & p.position != 0}.sort { |a, b| a.position <=> b.position }.first(c)","      if xp","        xform[pos] = [*xp][0...c]","        [*xp][0...c].each { |xxp| x.delete xxp }","      end","    end","    @team_form = {in_form: xform, other: x}","    @team_form","  end","",">>>>>>> 0e45809c2b8f645826e4de91adff641269ed9bf4",""]},{"start":{"row":4,"column":25},"end":{"row":5,"column":36},"action":"remove","lines":[")","      # do_create_team(prefix, xteam"]},{"start":{"row":4,"column":25},"end":{"row":4,"column":31},"action":"insert","lines":[" = nil"]},{"start":{"row":13,"column":9},"end":{"row":23,"column":18},"action":"remove","lines":["","    end","","    private","    def do_create_team(xlogin, xteam)","      x = X11.new(uid: xlogin, tuid: xteam)","      x.register","      x.login","      x.create_team","      x.buy_player","      x.get_lineup"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":8,"column":0},"end":{"row":8,"column":0},"isBackwards":false},"options":{"tabSize":2,"useSoftTabs":true,"guessTabSize":false,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425891686846,"hash":"d7bb9d0988bec5fc22cc20891e28c492ee9f000d"}